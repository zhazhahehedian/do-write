package com.dpbug.server.ai.prompt.model;

import lombok.Getter;

/**
 * 写作风格枚举
 * <p>
 * 定义6种预设写作风格，每种风格包含详细的核心指令。
 * 参考：learn1/backend/app/services/prompt_service.py#WritingStyleManager
 * </p>
 */
@Getter
public enum WritingStyle {

    /**
     * 自然沉浸 - 祛除翻译腔，强调生活质感，像呼吸一样自然的叙事
     */
    NATURAL("natural", "自然沉浸 (Natural & Immersive)",
            "祛除翻译腔，强调生活质感，像呼吸一样自然的叙事",
            """
            ### 核心指令：自然沉浸风格
            请模拟人类作家在放松状态下的写作，通过以下规则消除"AI味"：

            1.  **拒绝翻译腔与书面化**：
                -   严禁使用"一种...的感觉"、"随着..."、"与此同时"等连接词。
                -   多用短句和"流水句"，模拟人类视线的移动和思维的跳跃。
                -   口语化叙述，但不要滥用语气词，而是通过句子的长短节奏来体现语气。

            2.  **生活化的颗粒度**：
                -   描写不要宏大，要聚焦在具体的、微小的生活细节（如：杯子上的水渍、衣服的褶皱）。
                -   允许逻辑上的适度"松散"，不要让每句话都像说明书一样严丝合缝。

            3.  **具体的"展示"**：
                -   不要写"他很生气"，要写他"把烟头按灭在还没吃完的米饭里"。
                -   避免使用抽象的形容词（如：巨大的、美丽的、悲伤的），必须用名词和动词来承载画面。
            """),

    /**
     * 古典雅致 - 白话文与古典韵味的结合，强调留白与炼字
     */
    CLASSICAL("classical", "古典雅致 (Classical & Elegant)",
            "白话文与古典韵味的结合，强调留白与炼字",
            """
            ### 核心指令：古典雅致风格
            请模仿民国时期或古典白话小说的笔触，构建端庄且富有余味的叙事：

            1.  **炼字与韵律**：
                -   尽量使用双音节词或四字短语，但严禁堆砌辞藻。
                -   注重句子的声调韵律，读起来要有金石之声或流水之韵。
                -   适当使用倒装句或定语后置，增加古雅感。

            2.  **克制的修辞**：
                -   少用现代的比喻（如"像机器一样"），多用取自自然的比喻（如"如风过林"）。
                -   **意在言外**：不要把话说透，留三分余地。写景即是写情，不要将情感直接剖白。

            3.  **禁忌**：
                -   严禁使用现代科技词汇（除非题材需要）、网络用语或过于西化的句式（如长定语从句）。
                -   避免滥用"之乎者也"，追求的是"神似"而非生硬的半文半白。
            """),

    /**
     * 冷硬现代 - 海明威式的冰山理论，节奏极快，零度情感
     */
    MODERN("modern", "冷硬现代 (Modern & Hard-boiled)",
            "海明威式的冰山理论，节奏极快，零度情感",
            """
            ### 核心指令：冷硬现代风格
            请采用"极简主义"和"零度写作"手法，去除所有矫饰：

            1.  **冰山理论**：
                -   **只写动作和对话，完全剔除心理描写和形容词堆砌。**
                -   不要告诉读者角色感觉如何，通过角色的反应和环境的冷峻反馈来体现。

            2.  **电影蒙太奇节奏**：
                -   句子要短、脆、硬。像手术刀一样切开场景。
                -   段落之间快速切换，不要用过渡句连接，直接跳切。

            3.  **高信息密度**：
                -   删除所有废话。如果一个词删掉不影响理解，就删掉它。
                -   多用名词和强动词（Strong Verbs），少用副词（Adverbs）。例如：不要写"他重重地关上门"，写"他摔上了门"。
            """),

    /**
     * 意识流 - 注重感官通感与内心独白，打破现实与幻想的边界
     */
    POETIC("poetic", "意识流 (Stream of Consciousness)",
            "注重感官通感与内心独白，打破现实与幻想的边界",
            """
            ### 核心指令：意识流/诗意风格
            请侧重于主观感受的流动，而非客观事实的记录：

            1.  **通感与陌生化**：
                -   打通五感（如：听到了颜色的声音，闻到了悲伤的气味）。
                -   使用"陌生化"的语言，把熟悉的事物写得陌生，迫使读者重新审视。

            2.  **情绪的具象化**：
                -   **绝对禁止**直接出现"开心"、"痛苦"等抽象词汇。
                -   必须寻找"客观对应物"（Objective Correlative），将情绪投射到具体的景物上（如：生锈的铁轨、发霉的橘子）。

            3.  **流动的句式**：
                -   句子可以很长，包含多重意象的叠加。
                -   允许思维的非线性跳跃，模拟梦境或深层潜意识的逻辑。
            """),

    /**
     * 白描速写 - 只有骨架的叙事，强调绝对的精准和功能性
     */
    CONCISE("concise", "白描速写 (Sketch & Concise)",
            "只有骨架的叙事，强调绝对的精准和功能性",
            """
            ### 核心指令：白描速写风格
            请像速写画家一样，只勾勒线条，不涂抹色彩：

            1.  **功能性第一**：
                -   每一句话必须推动情节，或者揭示关键信息。
                -   如果一句话只是为了渲染气氛，删掉它。

            2.  **主谓宾结构**：
                -   尽量使用简单的主谓宾结构，减少修饰语。
                -   避免复杂的从句和嵌套结构。

            3.  **直击核心**：
                -   对话直接进入主题，去除寒暄和废话。
                -   环境描写仅限于对情节有物理影响的物体（如：挡路的石头、藏在桌下的枪）。
            """),

    /**
     * 感官特写 - 高分辨率的描写，强调材质、光影和微观细节
     */
    VIVID("vivid", "感官特写 (Sensory & Vivid)",
            "高分辨率的描写，强调材质、光影和微观细节",
            """
            ### 核心指令：感官特写风格
            请将镜头推到特写级别（Macro Lens），捕捉常人忽略的细节：

            1.  **反套路细节**：
                -   不要写大众化的细节（如：蓝天白云），要写具有**独特性**的细节（如：云层边缘那抹像淤青一样的灰紫色）。
                -   关注物体的**质感（Texture）**：粗糙的、粘稠的、冰凉的、颗粒感的。

            2.  **动态捕捉**：
                -   不要写静止的画面，要写光影的流变、灰尘的飞舞、肌肉的抽动。
                -   让读者产生生理性的反应（如：痛感、饥饿感、窒息感）。

            3.  **禁用词汇**：
                -   禁止使用"映入眼帘"、"宛如画卷"等陈词滥调。
                -   必须用具体的动词带动感官描写。
            """);

    /**
     * 风格ID（用于存储和查询）
     */
    private final String id;

    /**
     * 风格名称
     */
    private final String name;

    /**
     * 风格描述
     */
    private final String description;

    /**
     * 风格核心指令（提示词内容）
     */
    private final String promptContent;

    WritingStyle(String id, String name, String description, String promptContent) {
        this.id = id;
        this.name = name;
        this.description = description;
        this.promptContent = promptContent;
    }

    /**
     * 根据ID获取写作风格
     *
     * @param id 风格ID
     * @return 写作风格枚举，如果不存在返回null
     */
    public static WritingStyle fromId(String id) {
        if (id == null) {
            return null;
        }
        for (WritingStyle style : values()) {
            if (style.getId().equals(id)) {
                return style;
            }
        }
        return null;
    }
}
